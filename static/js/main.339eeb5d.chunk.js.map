{"version":3,"sources":["movies.js","components/MovieCard.js","helpers/constants.js","helpers/usePaginate.js","components/SelectCategory.js","components/FormPagination.js","helpers/calcNbPages.js","App.js","serviceWorker.js","index.js"],"names":["movies","id","title","category","likes","dislikes","movies$","Promise","resolve","reject","setTimeout","MovieCard","onDelete","onLike","onDislike","Col","md","Card","className","Title","Body","Text","Row","Button","variant","as","onClick","disabled","CATEGORY_ALL","ELEMENTS","usePaginate","desiredPage","nbElementsParPage","useState","firstElementIndex","setFirstElementIndex","lastElementIndex","setLastElementIndex","useEffect","nbElements","length","Math","min","visibleMovies","slice","SelectCategory","categories","handleChangeCategory","xs","FloatingLabel","controlId","label","Form","Select","onChange","map","value","FormPagination","page","handleChangeNbElements","handlePrevious","handleNext","element","calcNbPages","max","ceil","App","loading","setLoading","setMovies","then","res","setCategory","setPage","setNbElementsParPage","setCategories","categoryMovies","setCategoryMovies","updatedCategories","Set","filter","elem","isDeleted","updatedCategoryMovies","movie","indexOf","nbPages","index","findIndex","updatedMovies","Object","assign","isLiked","isDisliked","Container","fluid","event","target","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.339eeb5d.chunk.js","sourcesContent":["const movies = [\r\n    {\r\n        id: '1',\r\n        title: 'Oceans 8',\r\n        category: 'Comedy',\r\n        likes: 4,\r\n        dislikes: 1\r\n    }, {\r\n        id: '2',\r\n        title: 'Midnight Sun',\r\n        category: 'Comedy',\r\n        likes: 2,\r\n        dislikes: 0\r\n    }, {\r\n        id: '3',\r\n        title: 'Les indestructibles 2',\r\n        category: 'Animation',\r\n        likes: 3,\r\n        dislikes: 1\r\n    }, {\r\n        id: '4',\r\n        title: 'Sans un bruit',\r\n        category: 'Thriller',\r\n        likes: 6,\r\n        dislikes: 6\r\n    }, {\r\n        id: '5',\r\n        title: 'Creed II',\r\n        category: 'Drame',\r\n        likes: 16,\r\n        dislikes: 2\r\n    }, {\r\n        id: '6',\r\n        title: 'Pulp Fiction',\r\n        category: 'Thriller',\r\n        likes: 11,\r\n        dislikes: 3\r\n    }, {\r\n        id: '7',\r\n        title: 'Pulp Fiction',\r\n        category: 'Thriller',\r\n        likes: 12333,\r\n        dislikes: 32\r\n    }, {\r\n        id: '8',\r\n        title: 'Seven',\r\n        category: 'Thriller',\r\n        likes: 2,\r\n        dislikes: 1\r\n    }, {\r\n        id: '9',\r\n        title: 'Inception',\r\n        category: 'Thriller',\r\n        likes: 2,\r\n        dislikes: 1\r\n    }, {\r\n        id: '10',\r\n        title: 'Gone Girl',\r\n        category: 'Thriller',\r\n        likes: 22,\r\n        dislikes: 12\r\n    },\r\n]\r\n\r\nexport const movies$ = new Promise((resolve, reject) => setTimeout(resolve, 100, movies))\r\n","import React from 'react';\r\nimport {Button, Card, Col, Row} from 'react-bootstrap';\r\n\r\nconst MovieCard = ({title, category, likes, dislikes, onDelete, onLike, onDislike, id}) => {\r\n    return (\r\n        <Col md=\"auto\">\r\n            <Card className=\"my-2\">\r\n                <Card.Title className=\"mx-3\">{title}</Card.Title>\r\n                <Card.Body>\r\n                    <Card.Text>\r\n                        {`Category: ${category}`}\r\n                    </Card.Text>\r\n                    <Row className=\"mx-1\">\r\n                        <Button variant=\"light\" as={Col}\r\n                                onClick={() => onLike(id)}>\r\n                            <i className=\"fas fa-thumbs-up\"></i>\r\n                        </Button>\r\n                        <Button variant=\"light\" as={Col} className=\"mx-2\" disabled>{likes}</Button>\r\n                        <Button variant=\"light\" as={Col} onClick={() => onDislike(id)}>\r\n                            <i className=\"fas fa-thumbs-down\"></i>\r\n                        </Button>\r\n                        <Button variant=\"light\" as={Col} className=\"mx-2\" disabled>\r\n                            {dislikes}\r\n                        </Button>\r\n                        <Button variant=\"light\" as={Col} onClick={() => onDelete(id)}>\r\n                            <i className=\"fas fa-trash\"></i>\r\n                        </Button>\r\n                    </Row>\r\n                </Card.Body>\r\n            </Card>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport default MovieCard;\r\n","const CATEGORY_ALL = 'ALL';\r\nconst ELEMENTS = [4, 8, 12];\r\nconst FIRST_PAGE = 1;\r\n\r\nexport {CATEGORY_ALL, ELEMENTS, FIRST_PAGE};","import {useEffect, useState} from \"react\";\r\nimport {ELEMENTS} from \"./constants\";\r\n\r\nconst usePaginate = (desiredPage, nbElementsParPage, movies) => {\r\n    const [firstElementIndex, setFirstElementIndex] = useState(0);\r\n    const [lastElementIndex, setLastElementIndex] = useState(ELEMENTS[0]);\r\n\r\n    useEffect(() => {\r\n        const nbElements = movies.length;\r\n        const firstElementIndex = Math.min((desiredPage - 1) * nbElementsParPage, nbElements);\r\n        const lastElementIndex = Math.min(desiredPage * nbElementsParPage, nbElements);\r\n\r\n        setFirstElementIndex(firstElementIndex);\r\n        setLastElementIndex(lastElementIndex);\r\n    }, [desiredPage, nbElementsParPage, movies]);\r\n\r\n    return {firstElementIndex, lastElementIndex, visibleMovies: movies.slice(firstElementIndex, lastElementIndex)};\r\n}\r\n\r\nexport default usePaginate;","import {Col, FloatingLabel, Form} from \"react-bootstrap\";\r\nimport React from \"react\";\r\n\r\nconst SelectCategory = ({categories, handleChangeCategory}) => (\r\n    <Col xs={3}>\r\n        <FloatingLabel controlId=\"floating-category\" label=\"Category\">\r\n            <Form.Select aria-label=\"Category\" onChange={handleChangeCategory}>\r\n                {categories.map(category => <option key={category} value={category}>{category}</option>)}\r\n            </Form.Select>\r\n        </FloatingLabel>\r\n    </Col>\r\n);\r\n\r\nexport default SelectCategory;","import {Button, Col, FloatingLabel, Form} from \"react-bootstrap\";\r\nimport {ELEMENTS} from \"../helpers/constants\";\r\nimport React from \"react\";\r\n\r\nconst FormPagination = ({page, firstElementIndex, lastElementIndex, nbElements, handleChangeNbElements, handlePrevious, handleNext}) => (\r\n    <>\r\n        <Col xs={3}>\r\n            <FloatingLabel controlId=\"floating-nbelements\" label=\"Number\">\r\n                <Form.Select aria-label=\"Number\" onChange={handleChangeNbElements}>\r\n                    {ELEMENTS.map(element => <option key={element} value={element}>{element}</option>)}\r\n                </Form.Select>\r\n            </FloatingLabel>\r\n        </Col>\r\n        <Button variant=\"light\" as={Col} xs=\"auto\" className=\"my-2\" onClick={handlePrevious}>\r\n            <i className=\"fas fa-arrow-left\"></i>\r\n        </Button>\r\n        <Button variant=\"light\" as={Col} xs=\"auto\" className=\"my-2 mx-2\" disabled>{`${page}`}</Button>\r\n        <Button variant=\"light\" as={Col} xs=\"auto\" className=\"my-2\" onClick={handleNext}>\r\n            <i className=\"fas fa-arrow-right\"></i>\r\n        </Button>\r\n        <Col className=\"my-2 mx-2\" xs={3}>\r\n            {`Elements ${firstElementIndex + 1}-${lastElementIndex} of ${nbElements}`}\r\n        </Col>\r\n    </>\r\n);\r\n\r\nexport default FormPagination;\r\n","import {FIRST_PAGE} from \"./constants\";\r\n\r\nexport const calcNbPages = (nbElements, nbElementsParPage) => nbElementsParPage === 0 ? 1 :\r\n    Math.max(Math.ceil(nbElements / nbElementsParPage), FIRST_PAGE);\r\n\r\n","import React, {useEffect, useState} from 'react';\nimport {movies$} from './movies';\nimport {Container, Row} from 'react-bootstrap';\nimport MovieCard from \"./components/MovieCard\";\nimport {CATEGORY_ALL, ELEMENTS, FIRST_PAGE } from './helpers/constants';\nimport usePaginate from \"./helpers/usePaginate\";\nimport SelectCategory from \"./components/SelectCategory\";\nimport FormPagination from \"./components/FormPagination\";\nimport {calcNbPages} from \"./helpers/calcNbPages\";\n\nconst App = () => {\n    const [loading, setLoading] = useState(true);\n    const [movies, setMovies] = useState([]);\n\n    useEffect(() => {\n        movies$.then(res => {\n            setLoading(false);\n            setMovies(res);\n        })\n    }, []);\n\n    const [category, setCategory] = useState(CATEGORY_ALL);\n    const [page, setPage] = useState(FIRST_PAGE);\n    const [nbElementsParPage, setNbElementsParPage] = useState(ELEMENTS[0]);\n\n    const [categories, setCategories] = useState([]);\n    const [categoryMovies, setCategoryMovies] = useState([]);\n\n    useEffect(() => {\n        const updatedCategories = [\n            CATEGORY_ALL,\n            ...new Set(movies.filter(elem => !elem.isDeleted).map(elem => elem.category))];\n        const updatedCategoryMovies = movies.filter(movie => !movie.isDeleted &&\n            (category === CATEGORY_ALL ? true : category === movie.category))\n        if (updatedCategories.indexOf(category) === -1)\n        {\n            setCategory(CATEGORY_ALL);\n        }\n        const nbPages = calcNbPages(updatedCategoryMovies.length, nbElementsParPage);\n\n        setCategories( updatedCategories);\n        setCategoryMovies(updatedCategoryMovies);\n\n        if(page > nbPages)\n        {\n            setPage(Math.max(nbPages, FIRST_PAGE));\n        }\n    }, [movies, category, nbElementsParPage, page]);\n\n    const handleChangeCategory = (event) => {\n        setCategory(event.target.value);\n    }\n\n    const handleChangeNbElementsParPage = (event) => {\n        setNbElementsParPage(event.target.value);\n     }\n\n    const onDelete = (id) => {\n        const index = movies.findIndex(movie => movie.id === id);\n        const updatedMovies = [...movies.slice(0, index),\n            Object.assign({...movies[index]}, {isDeleted: true}),\n            ...movies.slice(index + 1, movies.length)];\n        setMovies(updatedMovies);\n    }\n\n    const onLike = (id) => {\n        const index = movies.findIndex(movie => movie.id === id);\n        const {likes, isLiked} = movies[index];\n        setMovies(\n            [...movies.slice(0, index),\n                Object.assign({...movies[index]}, {likes: isLiked ? likes - 1 : likes + 1, isLiked: !isLiked}),\n                ...movies.slice(index + 1, movies.length)]);\n    }\n\n    const onDislike = (id) => {\n        const index = movies.findIndex(movie => movie.id === id);\n        const {dislikes, isDisliked} = movies[index];\n        setMovies(\n            [...movies.slice(0, index),\n                Object.assign({...movies[index]}, {\n                    dislikes: isDisliked ? dislikes - 1 : dislikes + 1,\n                    isDisliked: !isDisliked\n                }),\n                ...movies.slice(index + 1, movies.length)]);\n    }\n\n    const handlePrevious = () => {\n        setPage(Math.max(FIRST_PAGE, page-1));\n    }\n\n    const handleNext = () => {\n        const nbPages = calcNbPages(categoryMovies.length, nbElementsParPage);\n        setPage(Math.min(nbPages, page+1));\n    }\n\n    const {\n        firstElementIndex,\n        lastElementIndex,\n        visibleMovies\n    } = usePaginate(page, nbElementsParPage, categoryMovies);\n\n    if (loading) {\n        return (\n            <h1>Loading ...</h1>\n        );\n    }\n    return (\n        <Container fluid>\n            <Row className=\"my-1\">\n                <SelectCategory categories={categories} handleChangeCategory={handleChangeCategory} />\n                <FormPagination page={page} firstElementIndex={firstElementIndex} lastElementIndex={lastElementIndex}\n                                nbElements={categoryMovies.length} handleChangeNbElements={handleChangeNbElementsParPage}\n                                handleNext={handleNext} handlePrevious={handlePrevious} />\n            </Row>\n            <Row className=\"justify-content-md-left\">\n                {visibleMovies.map(movie =>\n                    <MovieCard key={movie.id}\n                               {...movie}\n                               onDelete={onDelete}\n                               onLike={onLike}\n                               onDislike={onDislike}\n                    />\n                )}\n            </Row>\n        </Container>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}